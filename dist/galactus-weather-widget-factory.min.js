/*! galactus-weather-widget-factory 29-11-2016 */
var galactusWeatherApp=angular.module("galactusWeatherApp",["weatherWidgetModule","ngSanitize"]);galactusWeatherApp.controller("weatherWidgetEditorCtrl",["$scope",function(a){function b(a,b){for(var c in b)if(b[c].title==a.title)return!0;return!1}a.submitted=!1,a.widgetForm={},a.widgetConfigs=[],a.save=function(){if(a.submitted=!0,!a.userForm.$invalid){if(b(a.widgetForm,a.widgetConfigs))return void(a.duplicate=!0);a.widgetConfigs.push(angular.copy(a.widgetForm)),a.reset()}},a.reset=function(){a.submitted=!1,a.duplicate=!1,a.widgetForm.title=""}}]);var weatherWidgetModule=angular.module("weatherWidgetModule",["ngSanitize"]);weatherWidgetModule.directive("windIcon",function(){return{restrict:"E",replace:!0,scope:{angle:"@",customSize:"="},link:function(a){a.getWindIconClass=function(){if(a.angle)return"wi wi-wind towards-"+a.angle+"-deg"}},template:"<i style='font-size:{{customSize}}px;' ng-class='getWindIconClass()'></i>"}}),weatherWidgetModule.directive("weatherIcon",function(){return{restrict:"E",replace:!0,scope:{cloudiness:"@",customSize:"=",useGoogleImages:"="},link:function(a){a.getIconClass=function(){return a.cloudiness<20?"wi wi-day-sunny":a.cloudiness<90?"wi wi-day-cloudy":"wi wi-cloudy"}},template:"<i style='font-size:{{customSize}}px;' ng-class='getIconClass()'></i>"}}),weatherWidgetModule.service("weatherService",["$http","$filter","$window","$q","$timeout",function(a,b,c,d,e){"use strict";var f={curWeather:{},getWeather:function(b,c,e){var f=d.defer(),g={latitude:33,longitude:151};e=e||{coords:g};""+e.coords.latitude.toFixed(0)+e.coords.longitude.toFixed(0);return a.get("http://api.openweathermap.org/data/2.5/weather?appid=227b37f61eeafe6959b97149fff86cc2&lat="+e.coords.latitude+"&lon="+e.coords.longitude+"&units="+b+"&cnt=5").then(function(a){f.resolve(a.data)},function(a){console.error(a),f.reject(a)}),f.promise},populateModalObjectFromResponse:function(a,c){var d=c;return f.curWeather[d]?f.curWeather[d]:(f.curWeather[d]={temp:{},clouds:null},a&&(a.main&&(f.curWeather[d].temp.current=a.main.temp,f.curWeather[d].temp.min=a.main.temp_min,f.curWeather[d].temp.max=a.main.temp_max,f.curWeather[d].humidity=a.main.humidity),a.sys&&(f.curWeather[d].countryCode=a.sys.country),a.wind&&(f.curWeather[d].windSpeed=a.wind.speed,f.curWeather[d].windDeg=a.wind.deg),f.curWeather[d].locationname=a.name,f.curWeather[d].clouds=a.clouds?a.clouds.all:void 0,f.curWeather[d].timestamp=b("date")(new Date,"dd,MMM yy hh:mm a")),f.curWeather[d])},getCurrentPosition:function(){var a=d.defer();if(c.navigator.geolocation){var b={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};c.navigator.geolocation.getCurrentPosition(function(b){a.resolve(b)},function(b){console.error(response),a.reject(b)},b),e(function(){console.error("Geo Location timed out"),a.reject("Geo Location timed out")},2e4)}else a.reject("Geolocation not supported.");return a.promise}};return f}]),weatherWidgetModule.filter("temparature",["$filter",function(a){return function(b,c){c||(c=1);var d=a("number");return d(b,c)+"&deg;"}}]),weatherWidgetModule.directive("currentWeather",["weatherService","$compile",function(a,b){return{restrict:"E",scope:{units:"@?",title:"@",showwind:"@?"},templateUrl:"templates/weatherWidgetDisplay.html",link:function(b,c,d){b.units=b.units,b.showwind=b.showwind||!0,b.title=b.title||"Sample Date Widget",b.weather={};var e=a.getCurrentPosition().then(a.getWeather.bind(null,b.units,b.showwind));e.then(function(c){b.weather=a.populateModalObjectFromResponse(c,b.title)})}}}]);var weatherWidgetModule=angular.module("weatherWidgetModule",["ngSanitize"]);weatherWidgetModule.service("weatherService",["$http","$filter","$window","$q","$timeout",function(a,b,c,d,e){"use strict";var f={curWeather:{},getWeather:function(b,c,e){var f=d.defer(),g={latitude:33,longitude:151};return e=e||{coords:g},""+e.coords.latitude.toFixed(0)+e.coords.longitude.toFixed(0),a.get("http://api.openweathermap.org/data/2.5/weather?appid=227b37f61eeafe6959b97149fff86cc2&lat="+e.coords.latitude+"&lon="+e.coords.longitude+"&units="+b+"&cnt=5").then(function(a){f.resolve(a.data)},function(a){f.reject(a)}),f.promise},populateModalObjectFromResponse:function(a,c){var d=c;return f.curWeather[d]?f.curWeather[d]:(f.curWeather[d]={temp:{},clouds:null},a&&(a.main&&(f.curWeather[d].temp.current=a.main.temp,f.curWeather[d].temp.min=a.main.temp_min,f.curWeather[d].temp.max=a.main.temp_max,f.curWeather[d].humidity=a.main.humidity),a.sys&&(f.curWeather[d].countryCode=a.sys.country),a.wind&&(f.curWeather[d].windSpeed=a.wind.speed,f.curWeather[d].windDeg=a.wind.deg),f.curWeather[d].locationname=a.name,f.curWeather[d].clouds=a.clouds?a.clouds.all:void 0,f.curWeather[d].timestamp=b("date")(new Date,"dd,MMM yy hh:mm a")),f.curWeather[d])},getCurrentPosition:function(){var a=d.defer();if(c.navigator.geolocation){var b={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};c.navigator.geolocation.getCurrentPosition(function(b){a.resolve(b)},function(b){a.reject(b)},b),e(function(){a.reject("Geo Location timed out")},1e4)}else a.reject("Geolocation not supported.");return a.promise}};return f}]),weatherWidgetModule.filter("temparature",["$filter",function(a){return function(b,c){c||(c=1);var d=a("number");return d(b,c)+"&deg;"}}]),weatherWidgetModule.directive("currentWeather",["weatherService","$compile",function(a,b){return{restrict:"E",scope:{units:"@?",title:"@",showwind:"@?"},templateUrl:"templates/weatherWidgetDisplay.html",link:function(b,c,d){b.units=b.units,b.showwind=b.showwind||!0,b.title=b.title||"Sample Date Widget",b.weather={};var e=a.getCurrentPosition().then(a.getWeather.bind(null,b.units,b.showwind));e.then(function(c){b.weather=a.populateModalObjectFromResponse(c,b.title)})}}}]),weatherWidgetModule.directive("weatherIcon",function(){return{restrict:"E",replace:!0,scope:{cloudiness:"@",customSize:"=",useGoogleImages:"="},link:function(a){a.getIconClass=function(){return a.cloudiness<20?"wi wi-day-sunny":a.cloudiness<90?"wi wi-day-cloudy":"wi wi-cloudy"}},template:"<i style='font-size:{{customSize}}px;' ng-class='getIconClass()'></i>"}}),weatherWidgetModule.directive("windIcon",function(){return{restrict:"E",replace:!0,scope:{angle:"@",customSize:"="},link:function(a){a.getWindIconClass=function(){if(a.angle)return"wi wi-wind towards-"+a.angle+"-deg"}},template:"<i style='font-size:{{customSize}}px;' ng-class='getWindIconClass()'></i>"}}),galactusWeatherApp.directive("weatherWidgetEditorOutput",function(){return{restrict:"E",scope:{units:"@?",title:"@",showwind:"@?"},templateUrl:"templates/weatherWidgetEditorOutput.html",link:function(a,b,c){}}}),angular.module("templates-main",["index.html","sample.html","templates/weatherWidgetDisplay.html","templates/weatherWidgetEditorOutput.html"]),angular.module("index.html",[]).run(["$templateCache",function(a){a.put("index.html",'<!DOCTYPE html>\n<html>\n<head>\n  <title>Galactus Weather Widget Editor</title>\n  <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.css"/>\n  <link rel="stylesheet" type="text/css" href="bower_components/weather-icons/css/weather-icons.css"/>\n  <link rel="stylesheet" type="text/css" href="bower_components/weather-icons/css/weather-icons-wind.css"/>\n  <link rel="stylesheet" type="text/css" href="styles/galactus-weather-widget.css"/>\n  <link rel="stylesheet" type="text/css" href="styles/galactus-weather-widget-editor.css"/>\n  <script type="text/javascript" src="bower_components/angular/angular.js"></script>\n  <script type="text/javascript" src="bower_components/angular-sanitize/angular-sanitize.js"></script>\n  <script type="text/javascript" src="bower_components/moment/moment.js"></script>\n  <script type="text/javascript" src="galactus-weather-widget-directive.js"></script>\n  <script type="text/javascript" src="app.js"></script>\n  <script type="text/javascript" src="galactus-weather-widget-editor-output-directive.js"></script>\n\n \n</head>\n<!-- Tell angular this is the root element of the app and load the module named "galactusWeatherApp"-->\n<!-- invoke the controller weatherWidgetEditorCtrl - create ctr obect with a $scope object.-->\n<body ng-app="galactusWeatherApp" ng-controller="weatherWidgetEditorCtrl">\n  <div class="jumbotron">\n    <h1>Galctus Weather Widget Factory</h1> \n    <p>This is a widget factory to create robust performant weather widgets with Angular and Bootstrap.</p> \n  </div>\n\n  <div class="inputContainer col-md-4 col-md-offset-4 container">\n  <h2>Create a Widget</h2>\n    <form name="userForm" novalidate>\n      <div class="form-group" show-errors>\n        <label class="control-label">Title</label>\n        <input type="text" class="form-control" name="title" ng-model="widgetForm.title" required placeholder="Title" required/>\n        <div class="help-inline" ng-show="submitted && userForm.title.$error.required">Required</div>\n      </div>\n      <div class="form-group" show-errors>\n        <label class="control-label">Show Wind</label>\n        <div class="control-label" ng-init="widgetForm.showwind=\'true\'" >\n          <label class="radio-inline"><input type="radio" ng-model="widgetForm.showwind" name="showwind" value="true" required>True</label>\n          <label class="radio-inline"><input type="radio" ng-model="widgetForm.showwind" name="showwind" value="false" required>False</label>\n        </div>\n      </div>\n      <div class="form-group">\n          <label for="sel1">Unit</label>\n          <select class="form-control" id="sel1" ng-model="widgetForm.units" ng-init="widgetForm.units = \'metric\'">\n            <option value="metric">Metric</option>\n            <option value="imperial">Imperial</option>\n          </select>\n      </div>\n      \n      <button class="btn btn-primary" ng-click="save()">Manufacture</button>\n      <button class="btn btn-link" ng-click="reset()">Reset</button>\n      <span class="help-inline" ng-if="duplicate">Duplicate Widget exists.</span>\n\n    </form>\n  </div>\n\n  <div class="col-xs-12">&nbsp;</div>\n  <div class="col-xs-12">&nbsp;</div>\n  <hr class="col-xs-12">\n  <div class="col-xs-12">&nbsp;</div>\n\n  <div class="container">\n    <!--<div ng-repeat="row in widgetConfigs track by row.title">-->\n    <div ng-repeat="row in widgetConfigs">\n      <!--Invoke the wrapper directive weather-widget-editor-output -->\n      <weather-widget-editor-output units="{{row.units}}"\n          showwind="{{row.showwind}}"\n          title="{{row.title}}">\n      </weather-widget-editor-output>\n\n\n      <hr class="col-xs-12">\n\n    </div>\n  </div>\n\n\n</body>\n</html>')}]),angular.module("sample.html",[]).run(["$templateCache",function(a){a.put("sample.html",'<!DOCTYPE html>\n<html>\n<head>\n  <title>Reference Usage of Galactus Weather widget</title>\n  <link rel="stylesheet" type="text/css" href="bower_components/bootstrap/dist/css/bootstrap.css"/>\n  <link rel="stylesheet" type="text/css" href="bower_components/weather-icons/css/weather-icons.css"/>\n  <link rel="stylesheet" type="text/css" href="bower_components/weather-icons/css/weather-icons-wind.css"/>\n  <link rel="stylesheet" type="text/css" href="styles/galactus-weather-widget.min.css"/>\n  <script type="text/javascript" src="bower_components/angular/angular.js"></script>\n  <script type="text/javascript" src="bower_components/angular-sanitize/angular-sanitize.js"></script>\n  <script type="text/javascript" src="bower_components/moment/moment.js"></script>\n  <script type="text/javascript" src="galactus-weather-widget-directive.min.js"></script>\n </head>\n\n <!-- Tell angular this is the root element of the app and load the module named "weatherWidgetModule"-->\n<body ng-app="weatherWidgetModule">\n\t<div class="col-md-4 col-md-offset-4 container">\n\n  <!-- call the widget Element directive -->\n\t\t<current-weather units="imperial"\n\t\t          showwind="true"\n\t\t          title="A sample Weather widget">\n\t\t</current-weather>\n\t</div>\n</body>\n</html>')}]),angular.module("templates/weatherWidgetDisplay.html",[]).run(["$templateCache",function(a){a.put("templates/weatherWidgetDisplay.html",'<div class="row weather-widget">\n\n <div class="col-xs-12"><h4><b>{{title}}</b></h4></div>\n  <div class="container col-xs-12">\n            <div class="panel panel-default">\n              <div class="panel-heading">\n                <div class="panel-title header">\n                  <div class="row">\n                    <div class="col-xs-4">{{weather.locationname}}, {{weather.countryCode}}</div>\n                    <div class="col-xs-6"><span>{{weather.timestamp}}</span></div>\n                     <div class="col-xs-1 metric pull-right">\n                          <i ng-class="(units==\'metric\') ? \'wi wi-celsius\' : \'wi wi-fahrenheit\'"></i>\n                      </div>\n                  </div>\n                </div>\n              </div>\n              <div class="panel-body pull-center body day">\n                <div class="row">\n                  <div class="col-xs-4">\n                    <weather-icon cloudiness="{{ weather.clouds }}" custom-size="33" >\n                    </weather-icon>\n                  </div>\n                  <div class="col-xs-4"><span class="align-left tempContent"><span ng-bind-html="weather.temp.current | temparature:1"></span></span></div>\n                  <div class="col-xs-4" ng-if="showwind"><span class="align-left windContent">{{weather.windSpeed}} \n                  <span ng-if="(units==\'metric\')">km/h</span><span ng-if="(units==\'imperial\')">mph</span>\n                  </span></div>\n                </div>\n                <div class="row">\n                  <div class="col-xs-4"><span class="align-left subContent"><span ng-bind-html="weather.temp.max | temparature:1"></span>/<span ng-bind-html="weather.temp.min | temparature:1"></span></span></div>\n                  <div class="col-xs-4"><span class="align-left subContent">Humidity {{weather.humidity}}%</span></div>\n                  <div class="col-xs-4" ng-if="showwind">\n                      \n                      <wind-icon angle="{{ weather.windDeg }}" custom-size="20" > </weather-icon>\n                  </div>\n                 </div>\n              </div>\n            </div>\n  </div>\n  \n\n\n\n</div>\n')}]),angular.module("templates/weatherWidgetEditorOutput.html",[]).run(["$templateCache",function(a){a.put("templates/weatherWidgetEditorOutput.html",'<div class="container">\n    <div class="col-xs-6"><current-weather\n      units="{{units}}"\n      showwind="{{showwind}}"\n      title="{{title}}">\n    </current-weather></div>\n    <div class="col-xs-6">\n           <div class="col-xs-12"><h2></h2><h6><b>Code Snippet</b></h6></div>\n           <div class="col-xs-12"><pre>&lt;current-weather\n        units="{{units}}"\n        showwind="{{showwind}}"\n        title="{{title}}"&gt;\n      &lt;/current-weather&gt;</pre></div>\n    </div>\n</div>')}]);